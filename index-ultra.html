<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Твой Будущий Питомец</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body{padding:20px;font-family:sans-serif;background:#f9f9f9}
        .container{max-width:500px;margin:0 auto;background:#fff;padding:20px;border-radius:10px}
        h1{color:#FF6B8B;text-align:center}
        input,select{width:100%;padding:12px;margin:10px 0;border:1px solid #ddd;border-radius:8px}
        button{width:100%;padding:15px;background:#FF6B8B;color:#fff;border:none;border-radius:8px;font-size:16px}
    </style>
</head>
<body>
    <div class="container">
        <h1>Твой Будущий Питомец</h1>
        <p style="text-align:center;color:#666">Заявка на усыновление</p>
        
        <input type="text" id="name" placeholder="Ваше имя" required>
        <input type="tel" id="phone" placeholder="Телефон" required>
        <select id="purpose" required>
            <option value="">Цель обращения</option>
            <option>Усыновить питомца</option>
            <option>Запись на приём</option>
            <option>Вопрос</option>
        </select>
        
        <button onclick="submit()">Отправить заявку</button>
    </div>
    
    <script>
        // МГНОВЕННАЯ инициализация
        let tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        
        // Заполняем имя из Telegram
        if (tg.initDataUnsafe?.user?.first_name) {
            document.getElementById('name').value = tg.initDataUnsafe.user.first_name;
        }
        
        function submit() {
            const data = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                purpose: document.getElementById('purpose').value
            };
            
            tg.sendData(JSON.stringify(data));
            tg.close();
        }
        
        // Сообщаем об успешной загрузке
        setTimeout(() => console.log('Mini App loaded successfully'), 100);
    </script>
</body>
</html>
