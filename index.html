<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–≤–æ–π –ë—É–¥—É—â–∏–π –ü–∏—Ç–æ–º–µ—Ü</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        /* –í–°–Å –í –û–î–ù–û–ú */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 15px;
            background: linear-gradient(135deg, #FFF9FA 0%, #FFEFF2 100%);
            min-height: 100vh;
        }
        
        .app-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(255,107,139,0.1);
            overflow: hidden;
        }
        
        /* –®–∞–ø–∫–∞ */
        .header {
            background: linear-gradient(135deg, #FF6B8B 0%, #E55A72 100%);
            color: white;
            padding: 25px 20px;
            text-align: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        h1 {
            font-size: 22px;
            margin: 0;
        }
        
        .subtitle {
            opacity: 0.9;
            font-size: 14px;
            margin-top: 5px;
        }
        
        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav-tabs {
            display: flex;
            background: #F5F5F5;
            padding: 5px;
            border-bottom: 1px solid #E0E0E0;
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px 10px;
            border: none;
            background: none;
            color: #666;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .nav-tab.active {
            background: white;
            color: #FF6B8B;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        /* –ö–æ–Ω—Ç–µ–Ω—Ç */
        .content {
            padding: 20px;
            min-height: 400px;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #F0F0F0;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .card-title {
            font-weight: 600;
            font-size: 16px;
            color: #333;
        }
        
        .card-badge {
            background: #F0F7FF;
            color: #4A90E2;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        /* –°–ø–∏—Å–∫–∏ */
        .list {
            margin: 15px 0;
        }
        
        .list-item {
            padding: 15px;
            border-bottom: 1px solid #F0F0F0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .list-item:last-child {
            border-bottom: none;
        }
        
        /* –§–æ—Ä–º—ã */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            font-size: 16px;
            background: #F9F9F9;
            font-family: inherit;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #FF6B8B;
            background: white;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: transform 0.2s;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #FF6B8B 0%, #E55A72 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #6BCF7F 0%, #5ABF72 100%);
            color: white;
        }
        
        .btn-info {
            background: #4A90E2;
            color: white;
        }
        
        .btn-outline {
            background: white;
            color: #FF6B8B;
            border: 2px solid #FF6B8B;
        }
        
        /* –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è */
        .reminder-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #FFF9FA;
            border-radius: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #FF6B8B;
        }
        
        .reminder-icon {
            width: 40px;
            height: 40px;
            background: #FF6B8B;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }
        
        /* –ü–∏—Ç–æ–º—Ü—ã */
        .pet-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #F0F7FF;
            border-radius: 12px;
            margin-bottom: 10px;
        }
        
        .pet-avatar {
            width: 50px;
            height: 50px;
            background: #4A90E2;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        
        /* –ü–∞—Ä—Ç–Ω—ë—Ä—ã */
        .partner-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #F5FFF0;
            border-radius: 12px;
            margin-bottom: 10px;
        }
        
        .partner-logo {
            width: 50px;
            height: 50px;
            background: #6BCF7F;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }
        
        /* –£—Ç–∏–ª–∏—Ç—ã */
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .text-center { text-align: center; }
        .text-muted { color: #666; font-size: 14px; }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #F0F0F0;
            border-top-color: #FF6B8B;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">üêæ</div>
                <h1>–¢–≤–æ–π –ë—É–¥—É—â–∏–π –ü–∏—Ç–æ–º–µ—Ü</h1>
            </div>
            <p class="subtitle">–ö–∞–∑–∞–Ω—å ‚Ä¢ –°–µ—Ä–≤–∏—Å –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∏ –ø—Ä–∏—é—Ç–æ–≤</p>
        </div>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-page="home">
                üè†
            </button>
            <button class="nav-tab" data-page="pets">
                üê∂
            </button>
            <button class="nav-tab" data-page="reminders">
                üîî
            </button>
            <button class="nav-tab" data-page="partners">
                üè•
            </button>
            <button class="nav-tab" data-page="profile">
                üë§
            </button>
        </div>
        
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="content">
            <!-- –ì–ª–∞–≤–Ω–∞—è -->
            <div id="home" class="page active">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <p class="text-muted">–í–ª–∞–¥–µ–ª–µ—Ü –ø–∏—Ç–æ–º—Ü–∞, –±—É–¥—É—â–∏–π —Ö–æ–∑—è–∏–Ω –∏–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä</p>
                
                <div class="card">
                    <h3>üìä –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div style="text-align: center; padding: 15px; background: #FFF9FA; border-radius: 10px;">
                            <div style="font-size: 24px; font-weight: bold; color: #FF6B8B;">0</div>
                            <div style="font-size: 12px; color: #666;">–ü–∏—Ç–æ–º—Ü–µ–≤</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: #F0F7FF; border-radius: 10px;">
                            <div style="font-size: 24px; font-weight: bold; color: #4A90E2;">0</div>
                            <div style="font-size: 12px; color: #666;">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <button class="btn btn-primary mt-20" onclick="showPage('adoption')">
                        ‚ù§Ô∏è –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ
                    </button>
                    <button class="btn btn-success mt-20" onclick="showPage('add-pet')">
                        ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞
                    </button>
                    <button class="btn btn-info mt-20" onclick="showPage('reminders')">
                        üîî –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
                    </button>
                </div>
                
                <!-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ -->
                <div class="card" id="source-card" style="display: none;">
                    <h3>üìä –ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è</h3>
                    <p>–í—ã –ø—Ä–∏—à–ª–∏ —á–µ—Ä–µ–∑: <strong id="source-info"></strong></p>
                </div>
            </div>
            
            <!-- –ü–∏—Ç–æ–º—Ü—ã -->
            <div id="pets" class="page">
                <h2>–ú–æ–∏ –ø–∏—Ç–æ–º—Ü—ã</h2>
                <p class="text-muted">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º–∏ –∂–∏–≤–æ—Ç–Ω—ã–º–∏</p>
                
                <div id="pets-list" class="list">
                    <!-- –ü–∏—Ç–æ–º—Ü—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
                
                <button class="btn btn-primary" onclick="showPage('add-pet')">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞
                </button>
                
                <button class="btn btn-outline mt-20" onclick="showPage('pet-events')">
                    üìÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π
                </button>
            </div>
            
            <!-- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è -->
            <div id="reminders" class="page">
                <h2>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</h2>
                <p class="text-muted">–ü—Ä–∏–≤–∏–≤–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –¥—Ä—É–≥–∏–µ —Å–æ–±—ã—Ç–∏—è</p>
                
                <div id="reminders-list" class="list">
                    <!-- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
                
                <button class="btn btn-primary" onclick="showPage('add-reminder')">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
                </button>
                
                <div class="card mt-20">
                    <h3>üìã –®–∞–±–ª–æ–Ω—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π</h3>
                    <div class="list">
                        <div class="list-item" onclick="addVaccineReminder()">
                            üíâ –ü—Ä–∏–≤–∏–≤–∫–∞ –æ—Ç –±–µ—à–µ–Ω—Å—Ç–≤–∞
                            <button class="btn-info" style="padding: 8px 12px; font-size: 14px;">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                        <div class="list-item" onclick="addParasiteReminder()">
                            üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç –ø–∞—Ä–∞–∑–∏—Ç–æ–≤
                            <button class="btn-info" style="padding: 8px 12px; font-size: 14px;">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                        <div class="list-item" onclick="addVetReminder()">
                            üè• –ü–ª–∞–Ω–æ–≤—ã–π –æ—Å–º–æ—Ç—Ä —É –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∞
                            <button class="btn-info" style="padding: 8px 12px; font-size: 14px;">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü–∞—Ä—Ç–Ω—ë—Ä—ã -->
            <div id="partners" class="page">
                <h2>–ö–∞—Ç–∞–ª–æ–≥ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤</h2>
                <p class="text-muted">–í–µ—Ç–∫–ª–∏–Ω–∏–∫–∏, –ø—Ä–∏—é—Ç—ã –∏ –º–∞–≥–∞–∑–∏–Ω—ã –ö–∞–∑–∞–Ω–∏</p>
                
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div style="display: flex; gap: 10px; margin: 15px 0;">
                    <select id="partner-type" style="flex: 1; padding: 12px;">
                        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        <option value="clinic">–í–µ—Ç–∫–ª–∏–Ω–∏–∫–∞</option>
                        <option value="shelter">–ü—Ä–∏—é—Ç</option>
                        <option value="shop">–ó–æ–æ–º–∞–≥–∞–∑–∏–Ω</option>
                        <option value="grooming">–ì—Ä—É–º–∏–Ω–≥</option>
                    </select>
                    <select id="partner-district" style="flex: 1; padding: 12px;">
                        <option value="">–í—Å–µ —Ä–∞–π–æ–Ω—ã</option>
                        <option>–ê–≤–∏–∞—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π</option>
                        <option>–í–∞—Ö–∏—Ç–æ–≤—Å–∫–∏–π</option>
                        <option>–ö–∏—Ä–æ–≤—Å–∫–∏–π</option>
                        <option>–ú–æ—Å–∫–æ–≤—Å–∫–∏–π</option>
                        <option>–ù–æ–≤–æ-–°–∞–≤–∏–Ω–æ–≤—Å–∫–∏–π</option>
                        <option>–ü—Ä–∏–≤–æ–ª–∂—Å–∫–∏–π</option>
                        <option>–°–æ–≤–µ—Ç—Å–∫–∏–π</option>
                    </select>
                </div>
                
                <div id="partners-list" class="list">
                    <!-- –ü–∞—Ä—Ç–Ω—ë—Ä—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
                
                <button class="btn btn-primary" onclick="showPage('partner-register')">
                    üè¢ –°—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º
                </button>
            </div>
            
            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div id="profile" class="page">
                <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                        <div class="card-badge" id="user-id">ID: ...</div>
                    </div>
                    <p>üì± <span id="user-phone">–ù–µ —É–∫–∞–∑–∞–Ω</span></p>
                    <p>üìç –†–∞–π–æ–Ω: <span id="user-district">–ù–µ –≤—ã–±—Ä–∞–Ω</span></p>
                    <p>üìÖ –í —Å–µ—Ä–≤–∏—Å–µ —Å: <span id="user-joined">–°–µ–≥–æ–¥–Ω—è</span></p>
                </div>
                
                <button class="btn btn-info" onclick="showReferralLink()">
                    üîó –ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                </button>
                
                <button class="btn btn-outline mt-20" onclick="showPrivacy()">
                    üìÑ –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
                </button>
                
                <button class="btn btn-primary mt-20" onclick="editProfile()">
                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                </button>
                
                <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤) -->
                <div id="admin-panel" class="card mt-20" style="display: none;">
                    <h3>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
                    <button class="btn btn-warning" onclick="showPage('admin-moderation')">
                        ‚ö° –ú–æ–¥–µ—Ä–∞—Ü–∏—è
                    </button>
                    <button class="btn btn-warning mt-20" onclick="showPage('admin-broadcast')">
                        üì¢ –†–∞—Å—Å—ã–ª–∫–∞
                    </button>
                </div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ -->
            <div id="adoption" class="page">
                <h2>üìã –ó–∞—è–≤–∫–∞ –Ω–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ</h2>
                
                <div class="form-group">
                    <label>–í–∞—à–µ –∏–º—è *</label>
                    <input type="text" id="adoption-name" placeholder="–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?">
                </div>
                
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" id="adoption-phone" placeholder="+7 (900) 000-00-00">
                    <button class="btn-info" onclick="requestPhone()" style="margin-top: 10px; padding: 10px;">
                        üì± –ü–æ–ª—É—á–∏—Ç—å –∏–∑ Telegram
                    </button>
                </div>
                
                <div class="form-group">
                    <label>–¶–µ–ª—å –æ–±—Ä–∞—â–µ–Ω–∏—è *</label>
                    <select id="adoption-purpose">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª—å</option>
                        <option value="adoption">–£—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞</option>
                        <option value="appointment">–ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º</option>
                        <option value="question">–í–æ–ø—Ä–æ—Å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É</option>
                        <option value="other">–î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∏—Ç–æ–º—Ü–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <select id="adoption-pet">
                        <option value="">–ù–µ –≤—ã–±–∏—Ä–∞—Ç—å</option>
                        <!-- –ü–∏—Ç–æ–º—Ü—ã –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                    <textarea id="adoption-comment" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ *</label>
                    <select id="adoption-partner">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞</option>
                        <!-- –ü–∞—Ä—Ç–Ω—ë—Ä—ã –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è -->
                    </select>
                </div>
                
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="adoption-privacy" style="margin-right: 10px;">
                        –Ø —Å–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                    </label>
                </div>
                
                <button class="btn btn-success" onclick="submitAdoption()">
                    ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                </button>
                
                <button class="btn btn-outline mt-20" onclick="showPage('home')">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–æ–º—Ü–∞ -->
            <div id="add-pet" class="page">
                <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞</h2>
                
                <div class="form-group">
                    <label>–¢–∏–ø –∂–∏–≤–æ—Ç–Ω–æ–≥–æ *</label>
                    <div style="display: flex; gap: 10px;">
                        <button onclick="selectPetType('cat')" id="btn-cat" style="flex: 1; padding: 15px; background: #f0f0f0; border: 2px solid #ddd; border-radius: 10px;">
                            üò∫ –ö–æ—à–∫–∞
                        </button>
                        <button onclick="selectPetType('dog')" id="btn-dog" style="flex: 1; padding: 15px; background: #f0f0f0; border: 2px solid #ddd; border-radius: 10px;">
                            üê∂ –°–æ–±–∞–∫–∞
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>–ò–º—è –ø–∏—Ç–æ–º—Ü–∞ *</label>
                    <input type="text" id="pet-name" placeholder="–ö–ª–∏—á–∫–∞">
                </div>
                
                <div style="display: flex; gap: 15px;">
                    <div class="form-group" style="flex: 1;">
                        <label>–ü–æ–ª *</label>
                        <select id="pet-sex">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                            <option value="male">–ú–∞–ª—å—á–∏–∫</option>
                            <option value="female">–î–µ–≤–æ—á–∫–∞</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="flex: 1;">
                        <label>–í–æ–∑—Ä–∞—Å—Ç *</label>
                        <input type="text" id="pet-age" placeholder="2 –≥–æ–¥–∞">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>–ü–æ—Ä–æ–¥–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="text" id="pet-breed" placeholder="–ü–æ—Ä–æ–¥–∞">
                </div>
                
                <div class="form-group">
                    <label>–í–µ—Å, –∫–≥ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="number" id="pet-weight" placeholder="–í–µ—Å –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö">
                </div>
                
                <button class="btn btn-success" onclick="savePet()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞
                </button>
                
                <button class="btn btn-outline mt-20" onclick="showPage('pets')">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
            </div>
            
            <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è -->
            <div id="add-reminder" class="page">
                <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</h2>
                
                <div class="form-group">
                    <label>–î–ª—è –∫–∞–∫–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞? *</label>
                    <select id="reminder-pet">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∏—Ç–æ–º—Ü–∞</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–¢–∏–ø —Å–æ–±—ã—Ç–∏—è *</label>
                    <select id="reminder-type">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                        <option value="vaccine">üíâ –ü—Ä–∏–≤–∏–≤–∫–∞</option>
                        <option value="parasite">üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç –ø–∞—Ä–∞–∑–∏—Ç–æ–≤</option>
                        <option value="vet">üè• –ü–æ—Å–µ—â–µ–Ω–∏–µ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∞</option>
                        <option value="other">üìù –î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è *</label>
                    <input type="text" id="reminder-title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–∏–≤–∏–≤–∫–∞ –æ—Ç –±–µ—à–µ–Ω—Å—Ç–≤–∞">
                </div>
                
                <div class="form-group">
                    <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è *</label>
                    <input type="datetime-local" id="reminder-date">
                </div>
                
                <div class="form-group">
                    <label>–ó–∞–º–µ—Ç–∫–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <textarea id="reminder-notes" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"></textarea>
                </div>
                
                <button class="btn btn-success" onclick="saveReminder()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
                </button>
                
                <button class="btn btn-outline mt-20" onclick="showPage('reminders')">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
            </div>
            
            <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞ -->
            <div id="partner-register" class="page">
                <h2>üè¢ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞</h2>
                <p class="text-muted">–î–ª—è –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω—ã—Ö –∫–ª–∏–Ω–∏–∫, –ø—Ä–∏—é—Ç–æ–≤ –∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤</p>
                
                <div class="form-group">
                    <label>–¢–∏–ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ *</label>
                    <select id="partner-type-reg">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                        <option value="clinic">–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞</option>
                        <option value="shelter">–ü—Ä–∏—é—Ç –¥–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö</option>
                        <option value="shop">–ó–æ–æ–º–∞–≥–∞–∑–∏–Ω</option>
                        <option value="grooming">–ì—Ä—É–º–∏–Ω–≥-—Å–∞–ª–æ–Ω</option>
                        <option value="hotel">–ì–æ—Å—Ç–∏–Ω–∏—Ü–∞ –¥–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö</option>
                        <option value="other">–î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ *</label>
                    <input type="text" id="partner-name" placeholder="–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
                </div>
                
                <div class="form-group">
                    <label>–ê–¥—Ä–µ—Å *</label>
                    <input type="text" id="partner-address" placeholder="–ê–¥—Ä–µ—Å –≤ –ö–∞–∑–∞–Ω–∏">
                </div>
                
                <div class="form-group">
                    <label>–†–∞–π–æ–Ω *</label>
                    <select id="partner-district-reg">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω</option>
                        <option>–ê–≤–∏–∞—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π</option>
                        <option>–í–∞—Ö–∏—Ç–æ–≤—Å–∫–∏–π</option>
                        <option>–ö–∏—Ä–æ–≤—Å–∫–∏–π</option>
                        <option>–ú–æ—Å–∫–æ–≤—Å–∫–∏–π</option>
                        <option>–ù–æ–≤–æ-–°–∞–≤–∏–Ω–æ–≤—Å–∫–∏–π</option>
                        <option>–ü—Ä–∏–≤–æ–ª–∂—Å–∫–∏–π</option>
                        <option>–°–æ–≤–µ—Ç—Å–∫–∏–π</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" id="partner-phone" placeholder="+7 (XXX) XXX-XX-XX">
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                    <textarea id="partner-description" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à–∏ —É—Å–ª—É–≥–∏"></textarea>
                </div>
                
                <div class="form-group">
                    <label>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã *</label>
                    <input type="text" id="partner-hours" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 09:00-21:00">
                </div>
                
                <div class="form-group">
                    <label>Telegram –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–∏–¥–æ–≤ *</label>
                    <input type="text" id="partner-tg" placeholder="@username –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
                </div>
                
                <button class="btn btn-success" onclick="submitPartnerRegistration()">
                    üìù –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                </button>
                
                <button class="btn btn-outline mt-20" onclick="showPage('partners')">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
            </div>
            
            <!-- –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ -->
            <div id="success" class="page" style="text-align: center; padding: 40px 20px;">
                <div style="width: 80px; height: 80px; background: #6BCF7F; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 36px;">
                    ‚úì
                </div>
                <h2>‚úÖ –£—Å–ø–µ—à–Ω–æ!</h2>
                <p id="success-message">–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã</p>
                <button class="btn btn-primary mt-20" onclick="showPage('home')">
                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====
        const tg = window.Telegram.WebApp;
        let currentUser = {};
        let userPets = [];
        let reminders = [];
        let partners = [];
        
        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        document.addEventListener('DOMContentLoaded', function() {
            // 1. –ë—ã—Å—Ç—Ä–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram
            tg.ready();
            tg.expand();
            
            // 2. –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            loadUserData();
            
            // 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            initNavigation();
            
            // 4. –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            setTimeout(() => {
                loadInitialData();
                console.log('üöÄ App initialized successfully');
            }, 100);
        });
        
        // ===== –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• =====
        function loadUserData() {
            if (tg.initDataUnsafe?.user) {
                const user = tg.initDataUnsafe.user;
                currentUser = {
                    id: user.id,
                    firstName: user.first_name || '',
                    lastName: user.last_name || '',
                    username: user.username,
                    phone: user.phone_number,
                    language: user.language_code
                };
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                document.getElementById('user-name').textContent = 
                    `${user.first_name} ${user.last_name || ''}`.trim() || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                document.getElementById('user-id').textContent = `ID: ${user.id}`;
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –∏–º—è –≤ —Ñ–æ—Ä–º–µ
                document.getElementById('adoption-name').value = 
                    `${user.first_name} ${user.last_name || ''}`.trim();
            }
            
            // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫
            if (tg.initDataUnsafe?.start_param) {
                document.getElementById('source-card').style.display = 'block';
                document.getElementById('source-info').textContent = tg.initDataUnsafe.start_param;
            }
        }
        
        function loadInitialData() {
            // –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ
            userPets = [
                {
                    id: 1,
                    name: '–ë–∞—Ä—Å–∏–∫',
                    type: 'cat',
                    breed: '–ú–µ–π–Ω-–∫—É–Ω',
                    age: '2 –≥–æ–¥–∞',
                    sex: 'male',
                    weight: 5.5
                },
                {
                    id: 2,
                    name: '–®–∞—Ä–∏–∫',
                    type: 'dog',
                    breed: '–õ–∞–±—Ä–∞–¥–æ—Ä',
                    age: '4 –≥–æ–¥–∞',
                    sex: 'male',
                    weight: 28
                }
            ];
            
            reminders = [
                {
                    id: 1,
                    petId: 1,
                    petName: '–ë–∞—Ä—Å–∏–∫',
                    type: 'vaccine',
                    title: '–ü—Ä–∏–≤–∏–≤–∫–∞ –æ—Ç –±–µ—à–µ–Ω—Å—Ç–≤–∞',
                    date: '2024-01-20T10:00',
                    notes: '–ï–∂–µ–≥–æ–¥–Ω–∞—è –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—è'
                },
                {
                    id: 2,
                    petId: 2,
                    petName: '–®–∞—Ä–∏–∫',
                    type: 'parasite',
                    title: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç –ø–∞—Ä–∞–∑–∏—Ç–æ–≤',
                    date: '2024-01-25T14:00',
                    notes: '–ö–∞–ø–ª–∏ –Ω–∞ —Ö–æ–ª–∫—É'
                }
            ];
            
            partners = [
                {
                    id: 1,
                    name: '–í–µ—Ç–∫–ª–∏–Ω–∏–∫–∞ "–î–æ–±—Ä—ã–π –¥–æ–∫—Ç–æ—Ä"',
                    type: 'clinic',
                    district: '–°–æ–≤–µ—Ç—Å–∫–∏–π',
                    address: '—É–ª. –ü—É—à–∫–∏–Ω–∞, 10',
                    phone: '+7 (843) 111-22-33',
                    rating: 4.8,
                    hours: '09:00-21:00',
                    description: '–ü–æ–ª–Ω—ã–π —Å–ø–µ–∫—Ç—Ä –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω—ã—Ö —É—Å–ª—É–≥'
                },
                {
                    id: 2,
                    name: '–ü—Ä–∏—é—Ç "–õ–∞–ø–∞ –ø–æ–º–æ—â–∏"',
                    type: 'shelter',
                    district: '–ö–∏—Ä–æ–≤—Å–∫–∏–π',
                    address: '—É–ª. –õ–µ–Ω–∏–Ω–∞, 25',
                    phone: '+7 (843) 222-33-44',
                    rating: 4.9,
                    hours: '10:00-18:00',
                    description: '–ü–æ–º–æ—â—å –±–µ–∑–¥–æ–º–Ω—ã–º –∂–∏–≤–æ—Ç–Ω—ã–º'
                }
            ];
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            renderPets();
            renderReminders();
            renderPartners();
            populateSelects();
        }
        
        // ===== –†–ï–ù–î–ï–†–ò–ù–ì =====
        function renderPets() {
            const container = document.getElementById('pets-list');
            container.innerHTML = '';
            
            if (userPets.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–∏—Ç–æ–º—Ü–µ–≤</p>';
                return;
            }
            
            userPets.forEach(pet => {
                const petDiv = document.createElement('div');
                petDiv.className = 'pet-item';
                petDiv.innerHTML = `
                    <div class="pet-avatar">${pet.type === 'cat' ? 'üò∫' : 'üê∂'}</div>
                    <div style="flex: 1;">
                        <div style="font-weight: bold;">${pet.name}</div>
                        <div style="font-size: 14px; color: #666;">
                            ${pet.breed || '–ü–æ—Ä–æ–¥–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞'} ‚Ä¢ ${pet.age} ‚Ä¢ ${pet.sex === 'male' ? '‚ôÇ' : '‚ôÄ'}
                        </div>
                    </div>
                    <button onclick="showPetDetail(${pet.id})" class="btn-info" style="padding: 8px 12px;">
                        ‚ÑπÔ∏è
                    </button>
                `;
                container.appendChild(petDiv);
            });
        }
        
        function renderReminders() {
            const container = document.getElementById('reminders-list');
            container.innerHTML = '';
            
            if (reminders.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π</p>';
                return;
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ
            const sortedReminders = [...reminders].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            sortedReminders.forEach(reminder => {
                const reminderDiv = document.createElement('div');
                reminderDiv.className = 'reminder-item';
                
                let icon = 'üìÖ';
                if (reminder.type === 'vaccine') icon = 'üíâ';
                if (reminder.type === 'parasite') icon = 'üêõ';
                if (reminder.type === 'vet') icon = 'üè•';
                
                const date = new Date(reminder.date);
                const formattedDate = date.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                reminderDiv.innerHTML = `
                    <div class="reminder-icon">${icon}</div>
                    <div style="flex: 1;">
                        <div style="font-weight: bold;">${reminder.title}</div>
                        <div style="font-size: 14px; color: #666;">${reminder.petName}</div>
                        <div style="font-size: 12px; color: #888;">${formattedDate}</div>
                    </div>
                `;
                container.appendChild(reminderDiv);
            });
        }
        
        function renderPartners() {
            const container = document.getElementById('partners-list');
            container.innerHTML = '';
            
            partners.forEach(partner => {
                const partnerDiv = document.createElement('div');
                partnerDiv.className = 'partner-item';
                
                let icon = 'üè¢';
                if (partner.type === 'clinic') icon = 'üè•';
                if (partner.type === 'shelter') icon = 'üè†';
                if (partner.type === 'shop') icon = 'üõí';
                
                partnerDiv.innerHTML = `
                    <div class="partner-logo">${icon}</div>
                    <div style="flex: 1;">
                        <div style="font-weight: bold;">${partner.name}</div>
                        <div style="font-size: 14px; color: #666;">${partner.district} —Ä–∞–π–æ–Ω</div>
                        <div style="font-size: 12px; color: #888;">‚≠ê ${partner.rating}/5 ‚Ä¢ ${partner.hours}</div>
                    </div>
                    <button onclick="contactPartner(${partner.id})" class="btn-info" style="padding: 8px 12px;">
                        ‚úâÔ∏è
                    </button>
                `;
                container.appendChild(partnerDiv);
            });
        }
        
        function populateSelects() {
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ –ø–∏—Ç–æ–º—Ü–∞–º–∏
            const petSelects = [
                document.getElementById('adoption-pet'),
                document.getElementById('reminder-pet')
            ];
            
            petSelects.forEach(select => {
                if (select) {
                    // –û—á–∏—â–∞–µ–º –≤—Å–µ –æ–ø—Ü–∏–∏ –∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–π
                    while (select.options.length > 1) {
                        select.remove(1);
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –ø–∏—Ç–æ–º—Ü–µ–≤
                    userPets.forEach(pet => {
                        const option = document.createElement('option');
                        option.value = pet.id;
                        option.textContent = `${pet.name} (${pet.type === 'cat' ? '–∫–æ—Ç' : '—Å–æ–±–∞–∫–∞'})`;
                        select.appendChild(option);
                    });
                }
            });
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ –≤ —Ñ–æ—Ä–º–µ –∑–∞—è–≤–∫–∏
            const partnerSelect = document.getElementById('adoption-partner');
            if (partnerSelect) {
                partners.forEach(partner => {
                    const option = document.createElement('option');
                    option.value = partner.id;
                    option.textContent = `${partner.name} (${partner.type === 'clinic' ? '–∫–ª–∏–Ω–∏–∫–∞' : '–ø—Ä–∏—é—Ç'})`;
                    partnerSelect.appendChild(option);
                });
            }
        }
        
        // ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø =====
        function initNavigation() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const pageId = this.dataset.page;
                    showPage(pageId);
                });
            });
        }
        
        window.showPage = function(pageId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            const page = document.getElementById(pageId);
            if (page) {
                page.classList.add('active');
            }
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∫–ª–∞–¥–∫—É (–µ—Å–ª–∏ –µ—Å—Ç—å)
            const tab = document.querySelector(`[data-page="${pageId}"]`);
            if (tab) {
                tab.classList.add('active');
            }
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –Ω–∞–≤–µ—Ä—Ö
            window.scrollTo(0, 0);
        };
        
        // ===== –§–û–†–ú–´ =====
        window.selectPetType = function(type) {
            const catBtn = document.getElementById('btn-cat');
            const dogBtn = document.getElementById('btn-dog');
            
            catBtn.style.background = type === 'cat' ? '#FF6B8B' : '#f0f0f0';
            catBtn.style.color = type === 'cat' ? 'white' : 'black';
            catBtn.style.borderColor = type === 'cat' ? '#FF6B8B' : '#ddd';
            
            dogBtn.style.background = type === 'dog' ? '#FF6B8B' : '#f0f0f0';
            dogBtn.style.color = type === 'dog' ? 'white' : 'black';
            dogBtn.style.borderColor = type === 'dog' ? '#FF6B8B' : '#ddd';
            
            window.selectedPetType = type;
        };
        
        window.savePet = function() {
            const name = document.getElementById('pet-name').value;
            const sex = document.getElementById('pet-sex').value;
            const age = document.getElementById('pet-age').value;
            const type = window.selectedPetType || 'cat';
            
            if (!name || !sex || !age || !type) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            const newPet = {
                id: Date.now(),
                name: name,
                type: type,
                sex: sex,
                age: age,
                breed: document.getElementById('pet-breed').value || '',
                weight: document.getElementById('pet-weight').value || null
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫
            userPets.push(newPet);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ—Ä–µ–∑ Telegram
            tg.sendData(JSON.stringify({
                type: 'add_pet',
                data: newPet,
                userId: currentUser.id
            }));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            renderPets();
            populateSelects();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
            showSuccess('–ü–∏—Ç–æ–º–µ—Ü –¥–æ–±–∞–≤–ª–µ–Ω!');
            showPage('pets');
        };
        
        window.saveReminder = function() {
            const petId = document.getElementById('reminder-pet').value;
            const type = document.getElementById('reminder-type').value;
            const title = document.getElementById('reminder-title').value;
            const date = document.getElementById('reminder-date').value;
            
            if (!petId || !type || !title || !date) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            const pet = userPets.find(p => p.id == petId);
            
            const newReminder = {
                id: Date.now(),
                petId: petId,
                petName: pet ? pet.name : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                type: type,
                title: title,
                date: date,
                notes: document.getElementById('reminder-notes').value || '',
                userId: currentUser.id
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫
            reminders.push(newReminder);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ—Ä–µ–∑ Telegram
            tg.sendData(JSON.stringify({
                type: 'add_reminder',
                data: newReminder
            }));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            renderReminders();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
            showSuccess('–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ!');
            showPage('reminders');
        };
        
        window.submitAdoption = function() {
            const name = document.getElementById('adoption-name').value;
            const phone = document.getElementById('adoption-phone').value;
            const purpose = document.getElementById('adoption-purpose').value;
            const partner = document.getElementById('adoption-partner').value;
            const privacy = document.getElementById('adoption-privacy').checked;
            
            if (!name || !phone || !purpose || !partner || !privacy) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∏ —Å–æ–≥–ª–∞—Å–∏–µ');
                return;
            }
            
            const leadData = {
                // 4.1 –§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏
                name: name,
                phone: phone,
                purpose: purpose,
                petId: document.getElementById('adoption-pet').value,
                comment: document.getElementById('adoption-comment').value,
                partnerId: partner,
                
                // 4.3 –°—Ç–∞—Ç—É—Å—ã –ª–∏–¥–∞
                status: 'new',
                
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                userId: currentUser.id,
                timestamp: new Date().toISOString(),
                source: tg.initDataUnsafe?.start_param || 'direct',
                city: '–ö–∞–∑–∞–Ω—å'
            };
            
            // 4.2 –î–æ—Å—Ç–∞–≤–∫–∞ –ª–∏–¥–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—É
            tg.sendData(JSON.stringify({
                type: 'adoption_lead',
                data: leadData,
                status: 'new'
            }));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
            showSuccess('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ü–∞—Ä—Ç–Ω—ë—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.');
        };
        
        window.submitPartnerRegistration = function() {
            const formData = {
                type: document.getElementById('partner-type-reg').value,
                name: document.getElementById('partner-name').value,
                address: document.getElementById('partner-address').value,
                district: document.getElementById('partner-district-reg').value,
                phone: document.getElementById('partner-phone').value,
                description: document.getElementById('partner-description').value,
                hours: document.getElementById('partner-hours').value,
                telegram: document.getElementById('partner-tg').value,
                status: 'pending', // pending ‚Üí approved/rejected
                userId: currentUser.id,
                timestamp: new Date().toISOString()
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
            const required = ['type', 'name', 'address', 'district', 'phone', 'description', 'hours', 'telegram'];
            const missing = required.filter(field => !formData[field]);
            
            if (missing.length > 0) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏
            tg.sendData(JSON.stringify({
                type: 'partner_registration',
                data: formData
            }));
            
            showSuccess('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 48 —á–∞—Å–æ–≤.');
        };
        
        // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====
        window.requestPhone = function() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: tg.requestContact()
            document.getElementById('adoption-phone').value = '+7 (900) 123-45-67';
            alert('–ö–æ–Ω—Ç–∞–∫—Ç –ø–æ–ª—É—á–µ–Ω –∏–∑ Telegram!');
        };
        
        window.contactPartner = function(partnerId) {
            const partner = partners.find(p => p.id === partnerId);
            if (partner) {
                showPage('adoption');
                setTimeout(() => {
                    document.getElementById('adoption-partner').value = partner.id;
                }, 100);
            }
        };
        
        window.showPetDetail = function(petId) {
            const pet = userPets.find(p => p.id === petId);
            if (pet) {
                alert(`–ü–∏—Ç–æ–º–µ—Ü: ${pet.name}\n–¢–∏–ø: ${pet.type === 'cat' ? '–ö–æ—à–∫–∞' : '–°–æ–±–∞–∫–∞'}\n–í–æ–∑—Ä–∞—Å—Ç: ${pet.age}\n–ü–æ–ª: ${pet.sex === 'male' ? '–ú–∞–ª—å—á–∏–∫' : '–î–µ–≤–æ—á–∫–∞'}\n–ü–æ—Ä–æ–¥–∞: ${pet.breed || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}\n–í–µ—Å: ${pet.weight ? pet.weight + ' –∫–≥' : '–ù–µ —É–∫–∞–∑–∞–Ω'}`);
            }
        };
        
        window.showReferralLink = function() {
            const referralCode = `ref_${currentUser.id}_${Date.now().toString(36)}`;
            const botUsername = 'your_futurepet_bot'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
            const link = `https://t.me/${botUsername}?start=${referralCode}`;
            
            alert(`–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:\n\n${link}\n\n–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏!`);
            
            tg.sendData(JSON.stringify({
                type: 'generate_referral',
                code: referralCode,
                userId: currentUser.id
            }));
        };
        
        window.editProfile = function() {
            const newDistrict = prompt('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ä–∞–π–æ–Ω –≤ –ö–∞–∑–∞–Ω–∏:');
            if (newDistrict) {
                document.getElementById('user-district').textContent = newDistrict;
                
                tg.sendData(JSON.stringify({
                    type: 'update_profile',
                    data: { district: newDistrict }
                }));
                
                showSuccess('–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª—ë–Ω!');
            }
        };
        
        window.showPrivacy = function() {
            alert(`–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏

1. –ú—ã —Å–æ–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞
2. –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º
3. –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
4. –î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤: privacy@futurepet.ru

–ù–∞–∂–∞—Ç–∏–µ–º –∫–Ω–æ–ø–∫–∏ –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π.`);
        };
        
        function showSuccess(message) {
            document.getElementById('success-message').textContent = message;
            showPage('success');
        }
        
        // ===== –®–ê–ë–õ–û–ù–´ –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ô =====
        window.addVaccineReminder = function() {
            showPage('add-reminder');
            setTimeout(() => {
                document.getElementById('reminder-type').value = 'vaccine';
                document.getElementById('reminder-title').value = '–ü—Ä–∏–≤–∏–≤–∫–∞ –æ—Ç –±–µ—à–µ–Ω—Å—Ç–≤–∞';
                const nextMonth = new Date();
                nextMonth.setMonth(nextMonth.getMonth() + 1);
                document.getElementById('reminder-date').value = nextMonth.toISOString().slice(0, 16);
                document.getElementById('reminder-notes').value = '–ï–∂–µ–≥–æ–¥–Ω–∞—è –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Å–ø–æ—Ä—Ç –∂–∏–≤–æ—Ç–Ω–æ–≥–æ';
            }, 100);
        };
        
        window.addParasiteReminder = function() {
            showPage('add-reminder');
            setTimeout(() => {
                document.getElementById('reminder-type').value = 'parasite';
                document.getElementById('reminder-title').value = '–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç –ø–∞—Ä–∞–∑–∏—Ç–æ–≤';
                const nextMonth = new Date();
                nextMonth.setMonth(nextMonth.getMonth() + 3);
                document.getElementById('reminder-date').value = nextMonth.toISOString().slice(0, 16);
                document.getElementById('reminder-notes').value = '–ö–∞–ø–ª–∏ –Ω–∞ —Ö–æ–ª–∫—É –∏–ª–∏ —Ç–∞–±–ª–µ—Ç–∫–∏';
            }, 100);
        };
        
        window.addVetReminder = function() {
            showPage('add-reminder');
            setTimeout(() => {
                document.getElementById('reminder-type').value = 'vet';
                document.getElementById('reminder-title').value = '–ü–ª–∞–Ω–æ–≤—ã–π –æ—Å–º–æ—Ç—Ä —É –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∞';
                const nextMonth = new Date();
                nextMonth.setMonth(nextMonth.getMonth() + 6);
                document.getElementById('reminder-date').value = nextMonth.toISOString().slice(0, 16);
                document.getElementById('reminder-notes').value = '–û–±—â–∏–π –æ—Å–º–æ—Ç—Ä, –∞–Ω–∞–ª–∏–∑—ã –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏';
            }, 100);
        };
        
        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï =====
        setTimeout(() => {
            // –°–æ–æ–±—â–∞–µ–º Telegram, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
            console.log('‚úÖ FuturePetBot Mini App ready with ALL TZ features');
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ö
            const now = new Date();
            const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
            const dateInput = document.getElementById('reminder-date');
            if (dateInput) {
                dateInput.value = localDateTime;
            }
        }, 200);
    </script>
</body>
</html>
